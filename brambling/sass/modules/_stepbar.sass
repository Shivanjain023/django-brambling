@import compass/css3/border-radius

.stepbar
	@extend .clearfix
	+border-radius($border-radius-base)
	overflow: hidden
	margin-bottom: $line-height-computed

.step
	background: whitesmoke
	display: block
	padding: #{$line-height-computed / 2}
	color: darken(whitesmoke, 30%)
	text-align: center
	float: left
	border-right: 1px solid white
	&.complete, &.current
		background: lighten($brand-primary,2%)
		color: #FFF
	&.current
		background: darken($yellow-dark,5%)
		position: relative
		&:after
			content: " "
			position: absolute
			margin-left: auto
			margin-right: auto
			bottom: 0
			left: 0
			right: 0
			height: 0
			width: 0
			border-bottom: 6px solid white
			border-left: 5px solid transparent
			border-right: 5px solid transparent
	.stepbar-1-up > &
		width: 100%
	.stepbar-2-up > &
		width: 50%
	.stepbar-3-up > &
		width: 33.33%
	.stepbar-4-up > &
		width: 25%
	.stepbar-5-up > &
		width: 20%
	.stepbar-6-up > &
		width: 16.66%
	.stepbar-7-up > &
		width: 14.28%
	.stepbar-8-up > &
		width: 12.5%
	&:last-child
		border-right: 0
		// we want to make it to the right edge, even if the pixel widths don't
		// add up.
		float: right

a.step
	color: $text-color
	&:hover
		text-decoration: none
		background: darken(whitesmoke, 7%)
	&.complete:hover
		background: $yellow-dark

// VARIANTS

.stepbar-hug-masthead
	@extend .hug
	border-top: 0
	overflow: visible
	> .step
		border-color: #CCC
		border-style: solid
		border-top-width: 0
		border-left-width: 0
		border-right-width: 1px
		border-bottom-width: 1px
		&:first-child
			+border-radius(0 0 0 $border-radius-base)
			border-left-width: 1px
			border-left-style: solid
		&:last-child
			+border-radius(0 0 $border-radius-base 0)
	> .complete, > .current
		border-color: $yellow-darker
		&:last-child
			+box-shadow(-1px 0 0 0 $yellow-darker)
	> .current
		&::after
			bottom: -1px
		&::before
			content: " "
			position: absolute
			margin-left: auto
			margin-right: auto
			bottom: 0
			left: 0
			right: 0
			height: 0
			width: 0
			border-bottom: 7px solid $yellow-darker
			border-left: 6px solid transparent
			border-right: 6px solid transparent
