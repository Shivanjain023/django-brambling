{% extends 'brambling/event/__base.html' %}

{% load floppyforms %}

{% block content %}
    {{ block.super }}

	<h2>{% if discount.pk %}Edit discount: {{ discount.name }}{% else %}Add a discount{% endif %}</h2>

	{# novalidate - see https://github.com/brutasse/django-floppyforms/issues/75 #}
	<form action="{{ request.path }}" method="post" novalidate>
		{% csrf_token %}
		{% form discount_form %}
		{{ itemdiscount_formset.management_form }}
		{% for form in itemdiscount_formset.forms %}
			<h2>Item {{ forloop.counter }}</h2>
			{% form form %}
		{% endfor %}
		<button type="submit">{% if discount.pk %}Save changes{% else %}Add discount{% endif %}</button>
		{% if discount.pk %}<a href="../">Cancel</a>{% endif %}
	</form>
{% endblock %}
